---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "greynoise_sensor_bootstrap Resource - greynoise"
subcategory: ""
description: |-
  Sensor bootstrap resource provides options to bootstrap a server.
  It generates a script that can be used with a remote-exec provisioner to setup a GreyNoise sensor on a server.
  This resource is inspired by null_resource https://registry.terraform.io/providers/hashicorp/null/latest/docs/resources/resource to encapsulate provisioners.
---

# greynoise_sensor_bootstrap (Resource)

Sensor bootstrap resource provides options to bootstrap a server.
It generates a script that can be used with a `remote-exec` provisioner to setup a GreyNoise sensor on a server.

This resource is inspired by [null_resource](https://registry.terraform.io/providers/hashicorp/null/latest/docs/resources/resource) to encapsulate provisioners.

## Example Usage

```terraform
resource "greynoise_sensor_bootstrap" "this" {
  public_ips = ["44.13.34.10"]

  config = {
    # using config to comply with destroy provisioners only
    # referencing  'self', 'count.index' or 'each.key' only in destroy provisioners
    ssh_private_key = sensitive("XXX")
  }

  provisioner "remote-exec" {
    connection {
      host = "44.13.34.10"
      user = "ubuntu"
      port = 22

      private_key = self.config.ssh_private_key
    }

    inline = [
      # ensure that script can run by waiting for cloud-init to complete
      "cloud-init status --wait > /dev/null",
      self.setup_script,
    ]
  }

  provisioner "remote-exec" {
    connection {
      host = "44.13.34.10"
      user = "ubuntu"
      port = 22

      private_key = self.config.ssh_private_key
    }

    inline = [
      self.bootstrap_script,
    ]
    # failure is expected as SSH connection will be lost
    # once bootstrap completes and changes SSH port
    on_failure = continue
  }

  provisioner "remote-exec" {
    connection {
      host = "44.13.34.10"
      user = "ubuntu"
      port = self.ssh_port_selected

      private_key = self.config.ssh_private_key
    }

    when = destroy
    inline = [
      self.unbootstrap_script,
    ]
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `config` (Map of String) A map of arbitrary strings that can be used in any associated provisioners.
- `internal_ip` (String) Internal IP of the server to bootstrap.
- `nat` (Boolean) Whether or not NAT is used to route traffic to the server.
- `public_ip` (String, Deprecated) Public IP of the server to bootstrap.
- `public_ips` (List of String) Public IPs used to bootstrap the server.
- `ssh_port` (Number) SSH port to configure after bootstrap. If not provided a random port is selected.

### Read-Only

- `bootstrap_script` (String) Script that can be run to boostrap a server.
- `setup_script` (String, Sensitive) Script that sets up the server environment.
- `ssh_port_selected` (Number) SSH port selected - same as ssh_port if set, otherwise randomly selected port.
- `unbootstrap_script` (String) Script that can be run to unboostrap a server.
